<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JLPT N4 語彙学習アプリ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .vocabulary-text {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-emerald-100 min-h-screen p-2">
    <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-xl shadow-xl p-4 mb-2">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    <h1 class="text-xl font-bold text-gray-800">JLPT N4 語彙</h1>
                </div>
                <button onclick="reset()" class="p-1.5 hover:bg-gray-100 rounded-lg transition">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                </button>
            </div>

            <div class="flex gap-2 mb-3">
                <button id="learnBtn" onclick="setMode('learn')" class="flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-emerald-600 text-white">
                    学習モード
                </button>
                <button id="quizBtn" onclick="setMode('quiz')" class="flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-gray-100 text-gray-700 hover:bg-gray-200">
                    クイズモード
                </button>
            </div>

            <div class="mb-3">
                <div class="flex justify-between text-xs text-gray-600 mb-1">
                    <span id="progress"></span>
                    <span id="scoreDisplay"></span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div id="progressBar" class="bg-emerald-600 h-1.5 rounded-full transition-all duration-300" style="width: 2.9%"></div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl p-6 mb-3 text-center">
                <div id="vocabularyDisplay" class="text-5xl font-bold text-emerald-900 mb-3 vocabulary-text"></div>
                <div id="answerDisplay" class="space-y-2"></div>
            </div>

            <div id="controls"></div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-2 text-center text-xs text-gray-600">
            <p>全35語 | JLPT N4レベル</p>
        </div>
    </div>

    <script>
        const vocabularyData = [
            { word: '生活', reading: 'せいかつ', meaning: 'まいにちのくらし', example: '日本で生活しています。' },
            { word: '仕事', reading: 'しごと', meaning: 'かいしゃなどですること', example: '仕事がいそがしいです。' },
            { word: '会社', reading: 'かいしゃ', meaning: 'しごとをするところ', example: '会社ではたらいています。' },
            { word: '時間', reading: 'じかん', meaning: 'ときのながさ', example: '時間がありません。' },
            { word: '旅行', reading: 'りょこう', meaning: 'とおくへいくこと', example: 'きょうとへ旅行に行きます。' },
            { word: '電車', reading: 'でんしゃ', meaning: 'せんろのうえをはしるくるま', example: '電車で行きます。' },
            { word: '駅', reading: 'えき', meaning: 'でんしゃにのるところ', example: '駅で会いましょう。' },
            { word: '病院', reading: 'びょういん', meaning: 'びょうきのひとがいくところ', example: '病院へ行きます。' },
            { word: '音', reading: 'おと', meaning: 'きこえるもの', example: 'となりのへやから音が聞こえます。' },
            { word: '天気', reading: 'てんき', meaning: 'そらのようす', example: '今日は天気がいいです。' },
            { word: '予約', reading: 'よやく', meaning: 'まえにきめておくこと', example: 'ホテルを予約しました。' },
            { word: '海', reading: 'うみ', meaning: 'おおきなみずとみず', example: '海でおよぎました。' },
            { word: '大学', reading: 'だいがく', meaning: 'せんもんをべんきょうするところ', example: '大学で勉強しています。' },
            { word: '広い', reading: 'ひろい', meaning: 'スペースがおおきい', example: 'このアパートは広いです。' },
            { word: '使う', reading: 'つかう', meaning: 'どうぐなどをりようする', example: 'スマホを使います。' },
            { word: '作る', reading: 'つくる', meaning: 'あたらしくつくりだす', example: '料理を作ります。' },
            { word: '始める', reading: 'はじめる', meaning: 'スタートする', example: '勉強を始めます。' },
            { word: '終わる', reading: 'おわる', meaning: 'していたことがもうない', example: '仕事が終わりました。' },
            { word: '続ける', reading: 'つづける', meaning: 'やめないでやる', example: '日本語の勉強を続けます。' },
            { word: '交通', reading: 'こうつう', meaning: 'のりもののうごき', example: 'このまちは交通がふべんです。' },
            { word: '暑い', reading: 'あつい', meaning: 'てんきがたかい', example: 'このへやは暑いですね。' },
            { word: '待つ', reading: 'まつ', meaning: 'とまっている', example: 'ちょっと待ってください。' },
            { word: '入院', reading: 'にゅういん', meaning: 'びょういんにはいる', example: 'らいげつ入院することになりました。' },
            { word: '遅れる', reading: 'おくれる', meaning: 'よていのじかんよりあとになる', example: '学校に遅れました。' },
            { word: '変わる', reading: 'かわる', meaning: 'ちがうじょうたいになる', example: '天気が変わりました。' },
            { word: '忙しい', reading: 'いそがしい', meaning: 'することがおおい', example: '今日は忙しいです。' },
            { word: '大切', reading: 'たいせつ', meaning: 'とてもじゅうよう', example: '家族は大切です。' },
            { word: '便利', reading: 'べんり', meaning: 'つかいやすい', example: 'この町は便利です。' },
            { word: '有名', reading: 'ゆうめい', meaning: 'よくしられている', example: 'ふじさんはとても有名です。' },
            { word: '簡単', reading: 'かんたん', meaning: 'むずかしくない', example: 'この問題はかんたんです。' },
            { word: '早い', reading: 'はやい', meaning: 'じかんがみじかい', example: 'もう少し早いほうがいいです。' },
            { word: '一度', reading: 'いちど', meaning: 'ひとつのかい', example: 'おおさかに一度いったことがあります。' },
            { word: '安全', reading: 'あんぜん', meaning: 'あぶなくない', example: 'この道は安全です。' },
            { word: '空港', reading: 'くうこう', meaning: 'ひこうきのとまるところ', example: '今、くうこうにいます。' },
            { word: '寒い', reading: 'さむい', meaning: 'てんきがひくい', example: '今日は寒いですね。' }
        ];

        let currentIndex = 0;
        let mode = 'learn';
        let score = { correct: 0, total: 0 };
        let showAnswer = false;
        let selectedAnswer = null;
        let quizOptions = [];

        function generateOptions() {
            const correct = vocabularyData[currentIndex].reading;
            const currentWord = vocabularyData[currentIndex].word;
            const options = [correct];
            
            const allReadings = vocabularyData
                .filter(v => v.word !== currentWord)
                .map(v => v.reading);
            
            while (options.length < 4) {
                const random = allReadings[Math.floor(Math.random() * allReadings.length)];
                if (!options.includes(random)) {
                    options.push(random);
                }
            }
            
            return options.sort(() => Math.random() - 0.5);
        }

        function updateDisplay() {
            const current = vocabularyData[currentIndex];
            document.getElementById('vocabularyDisplay').textContent = current.word;
            document.getElementById('progress').textContent = `${currentIndex + 1} / ${vocabularyData.length}`;
            document.getElementById('progressBar').style.width = `${((currentIndex + 1) / vocabularyData.length) * 100}%`;
            
            if (mode === 'quiz' && score.total > 0) {
                document.getElementById('scoreDisplay').textContent = `正解率: ${Math.round((score.correct / score.total) * 100)}%`;
            } else {
                document.getElementById('scoreDisplay').textContent = '';
            }

            if (mode === 'learn') {
                document.getElementById('answerDisplay').innerHTML = `
                    <div class="text-xl text-emerald-700 font-medium vocabulary-text">${current.reading}</div>
                    <div class="text-base text-gray-700 vocabulary-text mt-2 px-3 py-2 bg-white rounded-lg">
                        れい: ${current.example}
                    </div>
                `;
            } else if (showAnswer) {
                document.getElementById('answerDisplay').innerHTML = `
                    <div class="text-xl text-emerald-700 font-medium vocabulary-text">${current.reading}</div>
                    <div class="text-base text-gray-700 vocabulary-text mt-2 px-3 py-2 bg-white rounded-lg">
                        れい: ${current.example}
                    </div>
                `;
            } else {
                document.getElementById('answerDisplay').innerHTML = '';
            }

            updateControls();
        }

        function updateControls() {
            const controls = document.getElementById('controls');
            
            if (mode === 'learn') {
                controls.innerHTML = `
                    <div class="flex gap-2">
                        <button onclick="prevWord()" ${currentIndex === 0 ? 'disabled' : ''} 
                            class="flex-1 py-2 px-4 text-sm bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition">
                            前へ
                        </button>
                        <button onclick="nextWord()" ${currentIndex === vocabularyData.length - 1 ? 'disabled' : ''} 
                            class="flex-1 py-2 px-4 text-sm bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition">
                            次へ
                        </button>
                    </div>
                `;
            } else {
                if (!showAnswer) {
                    controls.innerHTML = `
                        <div class="space-y-2">
                            <div class="grid grid-cols-2 gap-2">
                                ${quizOptions.map(option => `
                                    <button onclick="handleAnswer('${option}');" 
                                        class="py-2 px-4 text-base bg-emerald-100 text-emerald-900 rounded-lg font-medium hover:bg-emerald-200 transition vocabulary-text">
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    `;
                } else if (selectedAnswer === vocabularyData[currentIndex].reading) {
                    controls.innerHTML = `
                        <div class="text-center">
                            <div class="text-lg font-bold text-green-600 vocabulary-text">正解!</div>
                        </div>
                    `;
                } else {
                    controls.innerHTML = `
                        <div class="space-y-2">
                            <div class="text-center">
                                <div class="text-lg font-bold text-red-600 mb-1 vocabulary-text">不正解</div>
                                <div class="text-base text-gray-700 mb-2 vocabulary-text">
                                    正解: <span class="text-emerald-700 font-semibold">${vocabularyData[currentIndex].reading}</span>
                                </div>
                            </div>
                            <button onclick="retryQuestion()" 
                                class="w-full py-2 px-4 text-sm bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition">
                                もう一度挑戦
                            </button>
                        </div>
                    `;
                }
            }
        }

        function setMode(newMode) {
            mode = newMode;
            showAnswer = false;
            selectedAnswer = null;
            currentIndex = 0;
            
            if (mode === 'quiz') {
                score = { correct: 0, total: 0 };
                quizOptions = generateOptions();
            }
            
            document.getElementById('learnBtn').className = mode === 'learn' 
                ? 'flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-emerald-600 text-white'
                : 'flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-gray-100 text-gray-700 hover:bg-gray-200';
            
            document.getElementById('quizBtn').className = mode === 'quiz'
                ? 'flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-emerald-600 text-white'
                : 'flex-1 py-1.5 px-3 rounded-lg text-sm font-medium transition bg-gray-100 text-gray-700 hover:bg-gray-200';
            
            updateDisplay();
        }

        function nextWord() {
            if (currentIndex < vocabularyData.length - 1) {
                currentIndex++;
                showAnswer = false;
                updateDisplay();
            }
        }

        function prevWord() {
            if (currentIndex > 0) {
                currentIndex--;
                showAnswer = false;
                updateDisplay();
            }
        }

        function handleAnswer(answer) {
            selectedAnswer = answer;
            const isCorrect = answer === vocabularyData[currentIndex].reading;
            showAnswer = true;
            updateDisplay();
            
            if (isCorrect) {
                score.correct += 1;
                score.total += 1;
                setTimeout(() => {
                    if (currentIndex < vocabularyData.length - 1) {
                        currentIndex++;
                        showAnswer = false;
                        selectedAnswer = null;
                        quizOptions = generateOptions();
                        updateDisplay();
                    }
                }, 800);
            } else {
                score.total += 1;
            }
        }

        function retryQuestion() {
            showAnswer = false;
            selectedAnswer = null;
            quizOptions = generateOptions();
            updateDisplay();
        }

        function reset() {
            currentIndex = 0;
            showAnswer = false;
            score = { correct: 0, total: 0 };
            selectedAnswer = null;
            if (mode === 'quiz') {
                quizOptions = generateOptions();
            }
            updateDisplay();
        }

        updateDisplay();
    </script>
</body>
</html>